<div class="container">
  <div class="user-container">
    <div class="user-title">
      註冊
    </div>
    {{> message}}
    <form action="/users/register" method="POST" id="user-form" name="user-form" onsubmit="return checkPassword()">
      <div class="form-group">
        <div class="input-field">
          <i class="ml-2 mr-1 far fa-user"></i>
          <input type="text" name="username" placeholder="username" value="{{username}}" required>

        </div>
      </div>
      <div class="form-group">
        <div class="input-field">
          <i class="ml-2 mr-1 far fa-envelope"></i>
          <input type="email" name="email" placeholder="email" value="{{email}}" required>
        </div>
      </div>
      <div class="form-group">
        <div class="input-field">
          <i class="ml-2 mr-1 fa fa-key" aria-hidden="true"></i>
          <input type="password" id="password" name="password" placeholder="password" value="{{password}}" required>
        </div>
      </div>
      <div class="form-group">
        <div class="input-field">
          <i class="ml-2 mr-1 fas fa-lock"></i>
          <input type="password" id="confirm-password" name="confirmPassword" placeholder="confirm password"
            onchange="checkPassword()" required>
        </div>
      </div>
      <button class="btn">Sign up</button>
    </form>

    <a href="/users/login" class="mt-4" style="text-decoration: none;">Already have account</a>
  </div>
</div>

<script>

  function checkPassword() {
    const password = document.querySelector('#password').value
    const confirmPassword = document.querySelector('#confirm-password').value
    const confirmPasswordDOM = document.querySelector('#confirm-password')
    if (password !== confirmPassword) {
      confirmPasswordDOM.setCustomValidity("確認密碼錯誤，請再次輸入相同密碼")
      return false
    }
    else { return true }
  }
</script>